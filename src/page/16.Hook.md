<!--
 * @Description: Hookç®€ä»‹
 * @Author: xiao.zhang
 * @Date: 2020-09-08 14:11:34
 * @LastEditors: xiao.zhang
 * @LastEditTime: 2020-09-10 13:42:01
-->
### 1ï¼ŒHook æ˜¯ React 16.8 çš„æ–°å¢žç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§

### 2ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨Hook,ä»–å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜
ä¹‹å‰çš„reactç”¨ç±»çš„æ–¹å¼å¸¦æ¥çš„é—®é¢˜


1ï¼ŒReact éœ€è¦ä¸ºå…±äº«çŠ¶æ€é€»è¾‘æä¾›æ›´å¥½çš„åŽŸç”Ÿé€”å¾„ã€‚ä½ å¯ä»¥ä½¿ç”¨ Hook ä»Žç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æž„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚

2ï¼ŒHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éžå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚

3ï¼ŒReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ Hook åˆ™æ‹¥æŠ±äº†å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç‰ºç‰² React çš„ç²¾ç¥žåŽŸåˆ™ã€‚

### 3ï¼ŒHookä¸èƒ½åœ¨classç»„ä»¶ä¸­ä½¿ç”¨ã€‚React å†…ç½®äº†ä¸€äº›åƒ useState è¿™æ ·çš„ Hookã€‚ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„ Hook æ¥å¤ç”¨ä¸åŒç»„ä»¶ä¹‹é—´çš„çŠ¶æ€é€»è¾‘

### 4,Hookçš„ä½¿ç”¨è§„åˆ™
1ï¼Œåªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚ä½¿ç”¨Hook,ä¸è¦å†å¾ªçŽ¯ï¼Œæ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨

```
 // ðŸ”´ åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ Hook è¿åç¬¬ä¸€æ¡è§„åˆ™
  if (name !== '') {
    useEffect(function persistForm() {
      localStorage.setItem('formData', name);
    });
  }
```
è§£å†³åŠžæ³•
```
  useEffect(function persistForm() {
    // ðŸ‘ å°†æ¡ä»¶åˆ¤æ–­æ”¾ç½®åœ¨ effect ä¸­
    if (name !== '') {
      localStorage.setItem('formData', name);
    }
  })
```

2ï¼Œåªèƒ½åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨

### 5ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦åœ¨ç»„ä»¶ä¹‹é—´é‡ç”¨ä¸€ç‚¹é€»è¾‘ï¼Œæœ‰2ä¸ªè§£å†³æ–¹æ³•ï¼ŒHOCæˆ–è€…render propsã€‚æ­¤æ—¶ï¼Œè‡ªå®šä¹‰Hook å¯ä»¥è®©ä½ åœ¨ä¸å¢žåŠ ç»„ä»¶çš„æƒ…å†µä¸‹è¾¾åˆ°åŒæ ·çš„ç›®çš„

### 6ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨Hook.Hookæ˜¯ä»€ä¹ˆï¼Ÿ
#### å¦‚æžœä½ åœ¨ç¼–å†™å‡½æ•°ç»„ä»¶ï¼Œå¹¶ä¸”éœ€è¦æ·»åŠ state,æ­¤æ—¶ä¸éœ€è¦æŠŠå‡½æ•°ç»„ä»¶æ”¹ä¸ºclass,ç›´æŽ¥ä½¿ç”¨hookå°±å¯ä»¥äº†
#### Hookæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œä»–å¯ä»¥é’©å…¥reactç‰¹æ€§

### 7ï¼ŒEffectHookç›¸å½“äºŽ componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚

### 8, useEffectä½œç”¨ï¼š é€šè¿‡ä½¿ç”¨è¿™ä¸ª Hookï¼Œä½ å¯ä»¥è®© React ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åŽæ‰§è¡ŒæŸäº›æ“ä½œã€‚React ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œeffectâ€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ DOM æ›´æ–°ä¹‹åŽè°ƒç”¨å®ƒã€‚

#### 1ï¼ŒuseEffect ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åŽéƒ½æ‰§è¡Œå—ï¼Ÿ æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åŽå’Œæ¯æ¬¡æ›´æ–°ä¹‹åŽéƒ½ä¼šæ‰§è¡Œ

#### 2ï¼Œå¦‚æžœä½ çš„ effect è¿”å›žä¸€ä¸ªå‡½æ•°ï¼ŒReact å°†ä¼šåœ¨æ‰§è¡Œæ¸…é™¤æ“ä½œæ—¶è°ƒç”¨å®ƒ

#### 3ï¼Œä¸ºä»€ä¹ˆè¦åœ¨ effect ä¸­è¿”å›žä¸€ä¸ªå‡½æ•°ï¼Ÿ è¿™æ˜¯ effect å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª effect éƒ½å¯ä»¥è¿”å›žä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚å®ƒä»¬éƒ½å±žäºŽ effect çš„ä¸€éƒ¨åˆ†

#### 4ï¼ŒReact ä½•æ—¶æ¸…é™¤ effectï¼Ÿ React ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œ

```
import React, { useEffect } from 'react'
import Tictac from 'tictac.js'

function Countdowm(props) {
  const { currentTime, id, endTime, handleTimeOver } = props

  useEffect(() => {
    Tictac.init({
      currentTime // è®¾ç½®å½“å‰æ—¶é—´
    })

    Tictac.create(id, {
      targetId: id, // æ˜¾ç¤ºè®¡æ—¶å™¨çš„å®¹å™¨
      expires: endTime, // ç›®æ ‡æ—¶é—´
      formatIgnore: false,
      format: {
        // æ ¼å¼åŒ–å¯¹è±¡
        days: '{d}å¤©',
        hours: '{hh}å°æ—¶',
        minutes: '{mm}åˆ†',
        seconds: '{ss}ç§’'
      },
      timeout: function() {
        // è®¡æ—¶å™¨ timeout å›žè°ƒ
        let temp = document.getElementById(id)
        temp.innerHTML = 'æ´»åŠ¨å·²ç»“æŸ'
        handleTimeOver()
      }
    })

    return () => {
      // console.log('hhhh')
      Tictac.remove(id)
    }
  })

  return <span id={id} style={{ color: '#003cff' }}></span>
}
export default Countdowm

```


